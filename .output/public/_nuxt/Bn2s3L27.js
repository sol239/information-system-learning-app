var pa=Object.defineProperty;var fa=(l,s,t)=>s in l?pa(l,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[s]=t;var at=(l,s,t)=>fa(l,typeof s!="symbol"?s+"":s,t);import{f as Z,A as Ve,B as Pe,z as j,C as st,D as k,h as e,E as pe,x,o,w as h,G as R,P as ge,H as Be,s as he,I as Nt,b as F,J as Qt,K as ma,L as Zt,M as pt,N as Xt,O as ft,Q as ea,R as U,S as ga,l as G,T as dt,U as mt,V as va,W as Ze,X as ta,Y as ha,Z as Ee,$ as lt,a0 as ya,a1 as Le,a2 as ba,a3 as qe,a4 as xa,m as gt,a5 as Sa,a6 as Ca,a7 as Ne,a8 as Ke,a9 as Ia,aa as Re,ab as it,ac as $a,ad as ke,ae as Ea,af as Xe,d as me,ag as ka,ah as wa,ai as Oa,t as se,aj as Ae,ak as aa,al as rt,am as vt,an as et,ao as ht,ap as we,aq as _a,ar as la,as as na,at as oa,c as P,a as ue,au as Te,av as K,aw as ot,ax as Se,F as fe,v as be,ay as Ta,az as $e,aA as sa,aB as La,aC as Ba,aD as Aa,aE as yt,aF as nt,aG as ze,aH as Fa,aI as qa,aJ as za,aK as bt,aL as ct,g as xt,aM as St,aN as Da,aO as Me,aP as Ct,i as It,aQ as Ka,aR as Va,_ as Ma,aS as Rt,aT as Pa,aU as Na,aV as Ra,aW as Ha,aX as Ht,aY as Ua,aZ as ja,a_ as Ga,a$ as Wa,b0 as Ut,b1 as Ya,b2 as Ye,b3 as Ja,b4 as Qa,b5 as Za,b6 as Xa,b7 as el,b8 as tl,j as al,b9 as jt,p as ll,q as nl,y as ol}from"./HhEpKoRZ.js";import{_ as sl}from"./BR3S49oq.js";import{u as ia,_ as il,a as rl,b as ul}from"./PcMcfs8-.js";import{_ as dl}from"./CepKe8xJ.js";const[Oe,cl]=Ve("DialogRoot"),pl=Z({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(l,{emit:s}){const t=l,n=Pe(t,"open",s,{defaultValue:t.defaultOpen,passive:t.open===void 0}),i=j(),c=j(),{modal:p}=st(t);return cl({open:n,modal:p,openModal:()=>{n.value=!0},onOpenChange:f=>{n.value=f},onOpenToggle:()=>{n.value=!n.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:c}),(f,E)=>k(f.$slots,"default",{open:e(n),close:()=>n.value=!1})}}),fl=Z({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(l){const s=l;pe();const t=Oe();return(a,n)=>(o(),x(e(ge),R(s,{type:a.as==="button"?"button":void 0,onClick:n[0]||(n[0]=i=>e(t).onOpenChange(!1))}),{default:h(()=>[k(a.$slots,"default")]),_:3},16,["type"]))}}),ra=Z({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(l,{emit:s}){const t=l,a=s,n=Oe(),{forwardRef:i,currentElement:c}=pe();return n.titleId||(n.titleId=Be(void 0,"reka-dialog-title")),n.descriptionId||(n.descriptionId=Be(void 0,"reka-dialog-description")),he(()=>{n.contentElement=c,Nt()!==document.body&&(n.triggerElement.value=Nt())}),(p,f)=>(o(),x(e(Zt),{"as-child":"",loop:"",trapped:t.trapFocus,onMountAutoFocus:f[5]||(f[5]=E=>a("openAutoFocus",E)),onUnmountAutoFocus:f[6]||(f[6]=E=>a("closeAutoFocus",E))},{default:h(()=>[F(e(Qt),R({id:e(n).contentId,ref:e(i),as:p.as,"as-child":p.asChild,"disable-outside-pointer-events":p.disableOutsidePointerEvents,role:"dialog","aria-describedby":e(n).descriptionId,"aria-labelledby":e(n).titleId,"data-state":e(ma)(e(n).open.value)},p.$attrs,{onDismiss:f[0]||(f[0]=E=>e(n).onOpenChange(!1)),onEscapeKeyDown:f[1]||(f[1]=E=>a("escapeKeyDown",E)),onFocusOutside:f[2]||(f[2]=E=>a("focusOutside",E)),onInteractOutside:f[3]||(f[3]=E=>a("interactOutside",E)),onPointerDownOutside:f[4]||(f[4]=E=>a("pointerDownOutside",E))}),{default:h(()=>[k(p.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),ml=Z({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(l,{emit:s}){const t=l,a=s,n=Oe(),i=pt(a),{forwardRef:c,currentElement:p}=pe();return Xt(p),(f,E)=>(o(),x(ra,R({...t,...e(i)},{ref:e(c),"trap-focus":e(n).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:E[0]||(E[0]=r=>{var d;r.defaultPrevented||(r.preventDefault(),(d=e(n).triggerElement.value)==null||d.focus())}),onPointerDownOutside:E[1]||(E[1]=r=>{const d=r.detail.originalEvent,C=d.button===0&&d.ctrlKey===!0;(d.button===2||C)&&r.preventDefault()}),onFocusOutside:E[2]||(E[2]=r=>{r.preventDefault()})}),{default:h(()=>[k(f.$slots,"default")]),_:3},16,["trap-focus"]))}}),gl=Z({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(l,{emit:s}){const t=l,n=pt(s);pe();const i=Oe(),c=j(!1),p=j(!1);return(f,E)=>(o(),x(ra,R({...t,...e(n)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:E[0]||(E[0]=r=>{var d;r.defaultPrevented||(c.value||(d=e(i).triggerElement.value)==null||d.focus(),r.preventDefault()),c.value=!1,p.value=!1}),onInteractOutside:E[1]||(E[1]=r=>{var b;r.defaultPrevented||(c.value=!0,r.detail.originalEvent.type==="pointerdown"&&(p.value=!0));const d=r.target;((b=e(i).triggerElement.value)==null?void 0:b.contains(d))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&p.value&&r.preventDefault()})}),{default:h(()=>[k(f.$slots,"default")]),_:3},16))}}),vl=Z({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(l,{emit:s}){const t=l,a=s,n=Oe(),i=pt(a),{forwardRef:c}=pe();return(p,f)=>(o(),x(e(ft),{present:p.forceMount||e(n).open.value},{default:h(()=>[e(n).modal.value?(o(),x(ml,R({key:0,ref:e(c)},{...t,...e(i),...p.$attrs}),{default:h(()=>[k(p.$slots,"default")]),_:3},16)):(o(),x(gl,R({key:1,ref:e(c)},{...t,...e(i),...p.$attrs}),{default:h(()=>[k(p.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Gt=Z({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(l){const s=l;pe();const t=Oe();return(a,n)=>(o(),x(e(ge),R(s,{id:e(t).descriptionId}),{default:h(()=>[k(a.$slots,"default")]),_:3},16,["id"]))}}),hl=Z({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(l){const s=Oe();return ea(!0),pe(),(t,a)=>(o(),x(e(ge),{as:t.as,"as-child":t.asChild,"data-state":e(s).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:h(()=>[k(t.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),yl=Z({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(l){const s=Oe(),{forwardRef:t}=pe();return(a,n)=>{var i;return(i=e(s))!=null&&i.modal.value?(o(),x(e(ft),{key:0,present:a.forceMount||e(s).open.value},{default:h(()=>[F(hl,R(a.$attrs,{ref:e(t),as:a.as,"as-child":a.asChild}),{default:h(()=>[k(a.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):U("",!0)}}}),Wt=Z({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(l){const s=l,t=Oe();return pe(),(a,n)=>(o(),x(e(ge),R(s,{id:e(t).titleId}),{default:h(()=>[k(a.$slots,"default")]),_:3},16,["id"]))}}),bl=Z({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(l){const s=l,t=Oe(),{forwardRef:a,currentElement:n}=pe();return t.contentId||(t.contentId=Be(void 0,"reka-dialog-content")),he(()=>{t.triggerElement.value=n.value}),(i,c)=>(o(),x(e(ge),R(s,{ref:e(a),type:i.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":e(t).open.value||!1,"aria-controls":e(t).open.value?e(t).contentId:void 0,"data-state":e(t).open.value?"open":"closed",onClick:e(t).onOpenToggle}),{default:h(()=>[k(i.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}});function xl(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}const Sl=Z({__name:"ComboboxAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(l){const{forwardRef:s}=pe();return(t,a)=>(o(),x(e(ga),{"as-child":"",reference:t.reference},{default:h(()=>[F(e(ge),R({ref:e(s),"as-child":t.asChild,as:t.as},t.$attrs),{default:h(()=>[k(t.$slots,"default")]),_:3},16,["as-child","as"])]),_:3},8,["reference"]))}});function ua(l){const s=G(()=>e(l)),t=G(()=>new Intl.Collator("en",{usage:"search",...s.value}));return{startsWith:(c,p)=>p.length===0?!0:(c=c.normalize("NFC"),p=p.normalize("NFC"),t.value.compare(c.slice(0,p.length),p)===0),endsWith:(c,p)=>p.length===0?!0:(c=c.normalize("NFC"),p=p.normalize("NFC"),t.value.compare(c.slice(-p.length),p)===0),contains:(c,p)=>{if(p.length===0)return!0;c=c.normalize("NFC"),p=p.normalize("NFC");let f=0;const E=p.length;for(;f+E<=c.length;f++){const r=c.slice(f,f+E);if(t.value.compare(p,r)===0)return!0}return!1}}}function Cl(l,s,t){return l===void 0?!1:Array.isArray(l)?l.some(a=>Je(a,s,t)):Je(l,s,t)}function Je(l,s,t){return l===void 0||s===void 0?!1:typeof l=="string"?l===s:typeof t=="function"?t(l,s):typeof t=="string"?(l==null?void 0:l[t])===(s==null?void 0:s[t]):dt(l,s)}function Il(l,s,t){const a=l.findIndex(p=>dt(p,s)),n=l.findIndex(p=>dt(p,t));if(a===-1||n===-1)return[];const[i,c]=[a,n].sort((p,f)=>p-f);return l.slice(i,c+1)}const[ut,$l]=Ve("ListboxRoot"),El=Z({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(l,{expose:s,emit:t}){const a=l,n=t,{multiple:i,highlightOnHover:c,orientation:p,disabled:f,selectionBehavior:E,dir:r}=st(a),{getItems:d}=mt({isProvider:!0}),{handleTypeaheadSearch:C}=va(),{primitiveElement:b,currentElement:S}=Ze(),w=xl(),g=ta(r),V=ha(S),z=j(),W=j(!1),I=j(!0),_=Pe(a,"modelValue",n,{defaultValue:a.defaultValue??(i.value?[]:void 0),passive:a.modelValue===void 0,deep:!0});function ie($){if(W.value=!0,a.multiple){const M=Array.isArray(_.value)?[..._.value]:[],Y=M.findIndex(de=>Je(de,$,a.by));a.selectionBehavior==="toggle"?(Y===-1?M.push($):M.splice(Y,1),_.value=M):(_.value=[$],z.value=$)}else a.selectionBehavior==="toggle"&&Je(_.value,$,a.by)?_.value=void 0:_.value=$;setTimeout(()=>{W.value=!1},1)}const y=j(null),q=j(null),B=j(!1),ee=j(!1),te=lt(),oe=lt(),le=lt();function ne(){return d().map($=>$.ref).filter($=>$.dataset.disabled!=="")}function L($,M=!0){if(!$)return;y.value=$,I.value&&y.value.focus(),M&&y.value.scrollIntoView({block:"nearest"});const Y=d().find(de=>de.ref===$);n("highlight",Y)}function H($){if(B.value)le.trigger($);else{const M=d().find(Y=>Je(Y.value,$,a.by));M&&(y.value=M.ref,L(M.ref))}}function v($){y.value&&y.value.isConnected&&($.preventDefault(),$.stopPropagation(),ee.value||y.value.click())}function u($){if(I.value){if(W.value=!0,B.value)oe.trigger($);else{const M=$.altKey||$.ctrlKey||$.metaKey;if(M&&$.key==="a"&&i.value){const Y=d(),de=Y.map(Ce=>Ce.value);_.value=[...de],$.preventDefault(),L(Y[Y.length-1].ref)}else if(!M){const Y=C($.key,d());Y&&L(Y)}}setTimeout(()=>{W.value=!1},1)}}function m(){ee.value=!0}function T(){requestAnimationFrame(()=>{ee.value=!1})}function N(){Le(()=>{const $=new KeyboardEvent("keydown",{key:"PageUp"});re($)})}function J($){const M=y.value;M!=null&&M.isConnected&&(q.value=M),y.value=null,n("leave",$)}function O($){var Y,de;const M=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((Y=$.currentTarget)==null||Y.dispatchEvent(M),n("entryFocus",M),!M.defaultPrevented)if(q.value)L(q.value);else{const Ce=(de=ne())==null?void 0:de[0];L(Ce)}}function re($){const M=ba($,p.value,g.value);if(!M)return;let Y=ne();if(y.value){if(M==="last")Y.reverse();else if(M==="prev"||M==="next"){M==="prev"&&Y.reverse();const de=Y.indexOf(y.value);Y=Y.slice(de+1)}ae($,Y[0])}if(Y.length){const de=!y.value&&M==="prev"?Y.length-1:0;L(Y[de])}if(B.value)return oe.trigger($)}function ae($,M){var de;if(!(B.value||a.selectionBehavior!=="replace"||!i.value||!Array.isArray(_.value)||($.altKey||$.ctrlKey||$.metaKey)&&!$.shiftKey)&&$.shiftKey){const Ce=d().filter(Q=>Q.ref.dataset.disabled!=="");let ce=(de=Ce.find(Q=>Q.ref===M))==null?void 0:de.value;if($.key===w.END?ce=Ce[Ce.length-1].value:$.key===w.HOME&&(ce=Ce[0].value),!ce||!z.value)return;const A=Il(Ce.map(Q=>Q.value),z.value,ce);_.value=A}}async function ve($){if(await Le(),B.value)te.trigger($);else{const M=ne(),Y=M.find(de=>de.dataset.state==="checked");Y?L(Y):M.length&&L(M[0])}}return Ee(_,()=>{W.value||Le(()=>{ve()})},{immediate:!0,deep:!0}),s({highlightedElement:y,highlightItem:H,highlightFirstItem:N,highlightSelected:ve,getItems:d}),$l({modelValue:_,onValueChange:ie,multiple:i,orientation:p,dir:g,disabled:f,highlightOnHover:c,highlightedElement:y,isVirtual:B,virtualFocusHook:te,virtualKeydownHook:oe,virtualHighlightHook:le,by:a.by,firstValue:z,selectionBehavior:E,focusable:I,onLeave:J,onEnter:O,changeHighlight:L,onKeydownEnter:v,onKeydownNavigation:re,onKeydownTypeAhead:u,onCompositionStart:m,onCompositionEnd:T,highlightFirstItem:N}),($,M)=>(o(),x(e(ge),{ref_key:"primitiveElement",ref:b,as:$.as,"as-child":$.asChild,dir:e(g),"data-disabled":e(f)?"":void 0,onPointerleave:J,onFocusout:M[0]||(M[0]=async Y=>{const de=Y.relatedTarget||Y.target;await Le(),y.value&&e(S)&&!e(S).contains(de)&&J(Y)})},{default:h(()=>[k($.$slots,"default",{modelValue:e(_)}),e(V)&&$.name?(o(),x(e(ya),{key:0,name:$.name,value:e(_),disabled:e(f),required:$.required},null,8,["name","value","disabled","required"])):U("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),[De,kl]=Ve("ComboboxRoot"),wl=Z({__name:"ComboboxRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},resetSearchTermOnBlur:{type:Boolean,default:!0},resetSearchTermOnSelect:{type:Boolean,default:!0},ignoreFilter:{type:Boolean},modelValue:{},defaultValue:{},multiple:{type:Boolean},dir:{},disabled:{type:Boolean},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","update:open"],setup(l,{expose:s,emit:t}){var oe,le,ne;const a=l,n=t,{primitiveElement:i,currentElement:c}=Ze(),{multiple:p,disabled:f,ignoreFilter:E,resetSearchTermOnSelect:r,dir:d}=st(a),C=ta(d),b=Pe(a,"modelValue",n,{defaultValue:a.defaultValue??(p.value?[]:void 0),passive:a.modelValue===void 0,deep:!0}),S=Pe(a,"open",n,{defaultValue:a.defaultOpen,passive:a.open===void 0});async function w(L){var H,v;S.value=L,B.search="",L?(await Le(),(H=i.value)==null||H.highlightSelected(),V.value=!0):V.value=!1,(v=W.value)==null||v.focus(),setTimeout(()=>{!L&&a.resetSearchTermOnBlur&&g.trigger()},1)}const g=lt(),V=j(!1),z=j(!1),W=j(),I=j(),_=G(()=>{var L;return((L=i.value)==null?void 0:L.highlightedElement)??void 0}),ie=j(new Map),y=j(new Map),{contains:q}=ua({sensitivity:"base"}),B=qe({search:"",filtered:{count:0,items:new Map,groups:new Set}});function ee(){if(!B.search||a.ignoreFilter||z.value){B.filtered.count=ie.value.size;return}B.filtered.groups=new Set;let L=0;for(const[H,v]of ie.value){const u=q(v,B.search);B.filtered.items.set(H,u?1:0),u&&L++}for(const[H,v]of y.value)for(const u of v)if(B.filtered.items.get(u)>0){B.filtered.groups.add(H);break}B.filtered.count=L}Ee([()=>B.search,()=>ie.value.size],()=>{ee()},{immediate:!0}),Ee(()=>S.value,()=>{Le(()=>{S.value&&ee()})},{flush:"post"});const te=xa();return he(()=>{var L,H,v;te!=null&&te.exposed&&(te.exposed.highlightItem=(L=i.value)==null?void 0:L.highlightItem,te.exposed.highlightFirstItem=(H=i.value)==null?void 0:H.highlightFirstItem,te.exposed.highlightSelected=(v=i.value)==null?void 0:v.highlightSelected)}),s({filtered:G(()=>B.filtered),highlightedElement:_,highlightItem:(oe=i.value)==null?void 0:oe.highlightItem,highlightFirstItem:(le=i.value)==null?void 0:le.highlightFirstItem,highlightSelected:(ne=i.value)==null?void 0:ne.highlightSelected}),kl({modelValue:b,multiple:p,disabled:f,open:S,onOpenChange:w,contentId:"",isUserInputted:V,isVirtual:z,inputElement:W,highlightedElement:_,onInputElementChange:L=>W.value=L,triggerElement:I,onTriggerElementChange:L=>I.value=L,parentElement:c,resetSearchTermOnSelect:r,onResetSearchTerm:g.on,allItems:ie,allGroups:y,filterState:B,ignoreFilter:E}),(L,H)=>(o(),x(e(Sa),null,{default:h(()=>[F(e(El),R({ref_key:"primitiveElement",ref:i},L.$attrs,{modelValue:e(b),"onUpdate:modelValue":H[0]||(H[0]=v=>gt(b)?b.value=v:null),style:{pointerEvents:e(S)?"auto":void 0},as:L.as,"as-child":L.asChild,dir:e(C),multiple:e(p),name:L.name,required:L.required,disabled:e(f),"highlight-on-hover":!0,by:a.by,onHighlight:H[1]||(H[1]=v=>n("highlight",v))}),{default:h(()=>[k(L.$slots,"default",{open:e(S),modelValue:e(b)})]),_:3},16,["modelValue","style","as","as-child","dir","multiple","name","required","disabled","by"])]),_:3}))}}),Ol=Z({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(l){const{CollectionSlot:s}=mt(),t=ut(),a=Ca(!1,10);return(n,i)=>(o(),x(e(s),null,{default:h(()=>[F(e(ge),{role:"listbox",as:n.as,"as-child":n.asChild,tabindex:e(t).focusable.value?e(t).highlightedElement.value?"-1":"0":void 0,"aria-orientation":e(t).orientation.value,"aria-multiselectable":!!e(t).multiple.value,"data-orientation":e(t).orientation.value,onMousedown:i[0]||(i[0]=Ke(c=>a.value=!0,["left"])),onFocus:i[1]||(i[1]=c=>{e(a)||e(t).onEnter(c)}),onKeydown:[i[2]||(i[2]=Ne(Ke(c=>{e(t).focusable.value&&e(t).onKeydownNavigation(c)},["prevent"]),["down","up","left","right","home","end"])),Ne(e(t).onKeydownEnter,["enter"]),e(t).onKeydownTypeAhead]},{default:h(()=>[k(n.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[_l,Tl]=Ve("ComboboxContent"),Ll=Z({__name:"ComboboxContentImpl",props:{position:{default:"inline"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(l,{emit:s}){const t=l,a=s,{position:n}=st(t),i=De(),{forwardRef:c,currentElement:p}=pe();ea(t.bodyLock),Xt(i.parentElement);const f=G(()=>t.position==="popper"?t:{}),E=Ia(f.value),r={boxSizing:"border-box","--reka-combobox-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-combobox-content-available-width":"var(--reka-popper-available-width)","--reka-combobox-content-available-height":"var(--reka-popper-available-height)","--reka-combobox-trigger-width":"var(--reka-popper-anchor-width)","--reka-combobox-trigger-height":"var(--reka-popper-anchor-height)"};Tl({position:n});const d=j(!1);return he(()=>{i.inputElement.value&&(d.value=p.value.contains(i.inputElement.value),d.value&&i.inputElement.value.focus())}),Re(()=>{var C;d.value&&((C=i.triggerElement.value)==null||C.focus())}),(C,b)=>(o(),x(e(Ol),{"as-child":""},{default:h(()=>[F(e(Qt),{"as-child":"","disable-outside-pointer-events":C.disableOutsidePointerEvents,onDismiss:b[0]||(b[0]=S=>e(i).onOpenChange(!1)),onFocusOutside:b[1]||(b[1]=S=>{var w;(w=e(i).parentElement.value)!=null&&w.contains(S.target)&&S.preventDefault(),a("focusOutside",S)}),onInteractOutside:b[2]||(b[2]=S=>a("interactOutside",S)),onEscapeKeyDown:b[3]||(b[3]=S=>a("escapeKeyDown",S)),onPointerDownOutside:b[4]||(b[4]=S=>{var w;(w=e(i).parentElement.value)!=null&&w.contains(S.target)&&S.preventDefault(),a("pointerDownOutside",S)})},{default:h(()=>[(o(),x(it(e(n)==="popper"?e($a):e(ge)),R({...C.$attrs,...e(E)},{id:e(i).contentId,ref:e(c),"data-state":e(i).open.value?"open":"closed",style:{display:"flex",flexDirection:"column",outline:"none",...e(n)==="popper"?r:{}}}),{default:h(()=>[k(C.$slots,"default")]),_:3},16,["id","data-state","style"]))]),_:3},8,["disable-outside-pointer-events"])]),_:3}))}}),Bl=Z({__name:"ComboboxArrow",props:{width:{default:10},height:{default:5},rounded:{type:Boolean},asChild:{type:Boolean},as:{default:"svg"}},setup(l){const s=l,t=De(),a=_l();return pe(),(n,i)=>e(t).open.value&&e(a).position.value==="popper"?(o(),x(e(Ea),ke(R({key:0},s)),{default:h(()=>[k(n.$slots,"default")]),_:3},16)):U("",!0)}}),Al=Z({__name:"ComboboxContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(l,{emit:s}){const n=Xe(l,s),{forwardRef:i}=pe(),c=De();return c.contentId||(c.contentId=Be(void 0,"reka-combobox-content")),(p,f)=>(o(),x(e(ft),{present:p.forceMount||e(c).open.value},{default:h(()=>[F(Ll,R({...e(n),...p.$attrs},{ref:e(i)}),{default:h(()=>[k(p.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),Fl=Z({__name:"ComboboxEmpty",props:{asChild:{type:Boolean},as:{}},setup(l){const s=l,t=De(),a=G(()=>t.ignoreFilter.value?t.allItems.value.size===0:!!t.filterState.search&&t.filterState.filtered.count===0);return(n,i)=>a.value?(o(),x(e(ge),ke(R({key:0},s)),{default:h(()=>[k(n.$slots,"default",{},()=>[i[0]||(i[0]=me("No options"))])]),_:3},16)):U("",!0)}}),[Gn,ql]=Ve("ListboxGroup"),zl=Z({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(l){const s=l,t=Be(void 0,"reka-listbox-group");return ql({id:t}),(a,n)=>(o(),x(e(ge),R({role:"group"},s,{"aria-labelledby":e(t)}),{default:h(()=>[k(a.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),[da,Dl]=Ve("ComboboxGroup"),Yt=Z({__name:"ComboboxGroup",props:{asChild:{type:Boolean},as:{}},setup(l){const s=l,t=Be(void 0,"reka-combobox-group"),a=De(),n=G(()=>a.ignoreFilter.value?!0:a.filterState.search?a.filterState.filtered.groups.has(t):!0),i=Dl({id:t,labelId:""});return he(()=>{a.allGroups.value.has(t)||a.allGroups.value.set(t,new Set)}),Re(()=>{a.allGroups.value.delete(t)}),(c,p)=>(o(),x(e(zl),R({id:e(t),"aria-labelledby":e(i).labelId},s,{hidden:n.value?void 0:!0}),{default:h(()=>[k(c.$slots,"default")]),_:3},16,["id","aria-labelledby","hidden"]))}}),Kl=Z({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(l,{emit:s}){const t=l,n=Pe(t,"modelValue",s,{defaultValue:"",passive:t.modelValue===void 0}),i=ut(),{primitiveElement:c,currentElement:p}=Ze(),f=G(()=>t.disabled||i.disabled.value||!1),E=j();return ka(()=>{var r;return E.value=(r=i.highlightedElement.value)==null?void 0:r.id}),he(()=>{i.focusable.value=!1,setTimeout(()=>{var r;t.autoFocus&&((r=p.value)==null||r.focus())},1)}),Re(()=>{i.focusable.value=!0}),(r,d)=>(o(),x(e(ge),{ref_key:"primitiveElement",ref:c,as:r.as,"as-child":r.asChild,value:e(n),disabled:f.value?"":void 0,"data-disabled":f.value?"":void 0,"aria-disabled":f.value??void 0,"aria-activedescendant":E.value,type:"text",onKeydown:[Ne(Ke(e(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),Ne(e(i).onKeydownEnter,["enter"])],onInput:d[0]||(d[0]=C=>{n.value=C.target.value,e(i).highlightFirstItem(C)}),onCompositionstart:e(i).onCompositionStart,onCompositionend:e(i).onCompositionEnd},{default:h(()=>[k(r.$slots,"default",{modelValue:e(n)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Vl=Z({__name:"ComboboxInput",props:{displayValue:{},modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(l,{emit:s}){const t=l,a=s,n=De(),i=ut(),{primitiveElement:c,currentElement:p}=Ze(),f=Pe(t,"modelValue",a,{passive:t.modelValue===void 0});he(()=>{p.value&&n.onInputElementChange(p.value)});function E(C){n.open.value||n.onOpenChange(!0)}function r(C){const b=C.target;n.open.value?n.filterState.search=b.value:(n.onOpenChange(!0),Le(()=>{b.value&&(n.filterState.search=b.value,i.highlightFirstItem(C))}))}function d(){const C=n.modelValue.value;t.displayValue?f.value=t.displayValue(C):!n.multiple.value&&C&&!Array.isArray(C)&&typeof C!="object"?f.value=C.toString():f.value="",Le(()=>{f.value=f.value})}return n.onResetSearchTerm(()=>{d()}),Ee(n.modelValue,async()=>{!n.isUserInputted.value&&n.resetSearchTermOnSelect.value&&d()},{immediate:!0,deep:!0}),Ee(()=>t.modelValue,()=>{t.modelValue!==void 0&&(n.filterState.search=t.modelValue)}),(C,b)=>(o(),x(e(Kl),{ref_key:"primitiveElement",ref:c,modelValue:e(f),"onUpdate:modelValue":b[0]||(b[0]=S=>gt(f)?f.value=S:null),as:C.as,"as-child":C.asChild,"auto-focus":C.autoFocus,"aria-expanded":e(n).open.value,"aria-controls":e(n).contentId,"aria-autocomplete":"list",role:"combobox",autocomplete:"false",onInput:r,onKeydown:Ne(Ke(E,["prevent"]),["down","up"])},{default:h(()=>[k(C.$slots,"default")]),_:3},8,["modelValue","as","as-child","auto-focus","aria-expanded","aria-controls","onKeydown"]))}}),Ml="listbox.select",[Pl,Nl]=Ve("ListboxItem"),Rl=Z({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(l,{emit:s}){const t=l,a=s,n=Be(void 0,"reka-listbox-item"),{CollectionItem:i}=mt(),{forwardRef:c,currentElement:p}=pe(),f=ut(),E=G(()=>p.value===f.highlightedElement.value),r=G(()=>Cl(f.modelValue.value,t.value,f.by)),d=G(()=>f.disabled.value||t.disabled);async function C(S){a("select",S),!(S!=null&&S.defaultPrevented)&&!d.value&&S&&(f.onValueChange(t.value),f.changeHighlight(p.value))}function b(S){const w={originalEvent:S,value:t.value};Oa(Ml,C,w)}return Nl({isSelected:r}),(S,w)=>(o(),x(e(i),{value:S.value},{default:h(()=>[wa([E.value,r.value],()=>F(e(ge),R({id:e(n)},S.$attrs,{ref:e(c),role:"option",tabindex:e(f).focusable.value?E.value?"0":"-1":-1,"aria-selected":r.value,as:S.as,"as-child":S.asChild,disabled:d.value?"":void 0,"data-disabled":d.value?"":void 0,"data-highlighted":E.value?"":void 0,"data-state":r.value?"checked":"unchecked",onClick:b,onKeydown:Ne(Ke(b,["prevent"]),["space"]),onPointermove:w[0]||(w[0]=g=>{e(f).highlightedElement.value!==e(p)&&(e(f).highlightOnHover.value?e(f).changeHighlight(e(p),!1):e(f).focusable.value||e(f).changeHighlight(e(p),!1))})}),{default:h(()=>[k(S.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),w,1)]),_:3},8,["value"]))}}),Jt=Z({__name:"ComboboxItem",props:{textValue:{},value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["select"],setup(l,{emit:s}){const t=l,a=s,n=Be(void 0,"reka-combobox-item"),i=De(),c=da(null),{primitiveElement:p,currentElement:f}=Ze();if(t.value==="")throw new Error("A <ComboboxItem /> must have a value prop that is not an empty string. This is because the Combobox value can be set to an empty string to clear the selection and show the placeholder.");const E=G(()=>{if(i.isVirtual.value||i.ignoreFilter.value||!i.filterState.search)return!0;{const r=i.filterState.filtered.items.get(n);return r===void 0?!0:r>0}});return he(()=>{var d;i.allItems.value.set(n,t.textValue||f.value.textContent||f.value.innerText);const r=c==null?void 0:c.id;r&&(i.allGroups.value.has(r)?(d=i.allGroups.value.get(r))==null||d.add(n):i.allGroups.value.set(r,new Set([n])))}),Re(()=>{i.allItems.value.delete(n)}),(r,d)=>E.value?(o(),x(e(Rl),R({key:0},t,{id:e(n),ref_key:"primitiveElement",ref:p,disabled:e(i).disabled.value||r.disabled,onSelect:d[0]||(d[0]=C=>{a("select",C),!C.defaultPrevented&&!e(i).multiple.value&&!r.disabled&&!e(i).disabled.value&&(C.preventDefault(),e(i).onOpenChange(!1),e(i).modelValue.value=t.value)})}),{default:h(()=>[k(r.$slots,"default",{},()=>[me(se(r.value),1)])]),_:3},16,["id","disabled"])):U("",!0)}}),Hl=Z({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(l){const s=l;pe();const t=Pl();return(a,n)=>e(t).isSelected.value?(o(),x(e(ge),R({key:0,"aria-hidden":"true"},s),{default:h(()=>[k(a.$slots,"default")]),_:3},16)):U("",!0)}}),Ul=Z({__name:"ComboboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(l){const s=l;return(t,a)=>(o(),x(e(Hl),ke(Ae(s)),{default:h(()=>[k(t.$slots,"default")]),_:3},16))}}),jl=Z({__name:"ComboboxLabel",props:{for:{},asChild:{type:Boolean},as:{default:"div"}},setup(l){const s=l;pe();const t=da({id:"",labelId:""});return t.labelId||(t.labelId=Be(void 0,"reka-combobox-group-label")),(a,n)=>(o(),x(e(ge),R(s,{id:e(t).labelId}),{default:h(()=>[k(a.$slots,"default")]),_:3},16,["id"]))}}),Gl=Z({__name:"ComboboxPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(l){const s=l;return(t,a)=>(o(),x(e(aa),ke(Ae(s)),{default:h(()=>[k(t.$slots,"default")]),_:3},16))}}),Wl=Z({__name:"ComboboxSeparator",props:{asChild:{type:Boolean},as:{}},setup(l){const s=l;return pe(),(t,a)=>(o(),x(e(ge),R(s,{"aria-hidden":"true"}),{default:h(()=>[k(t.$slots,"default")]),_:3},16))}}),Yl=Z({__name:"ComboboxTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(l){const s=l,{forwardRef:t,currentElement:a}=pe(),n=De(),i=G(()=>s.disabled||n.disabled.value||!1);return he(()=>{a.value&&n.onTriggerElementChange(a.value)}),(c,p)=>(o(),x(e(ge),R(s,{ref:e(t),type:c.as==="button"?"button":void 0,tabindex:"-1","aria-label":"Show popup","aria-haspopup":"listbox","aria-expanded":e(n).open.value,"aria-controls":e(n).contentId,"data-state":e(n).open.value?"open":"closed",disabled:i.value,"data-disabled":i.value?"":void 0,"aria-disabled":i.value??void 0,onClick:p[0]||(p[0]=f=>e(n).onOpenChange(!e(n).open.value))}),{default:h(()=>[k(c.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","disabled","data-disabled","aria-disabled"]))}}),Jl=Z({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(l){const s=l;return(t,a)=>(o(),x(e(aa),ke(Ae(s)),{default:h(()=>[k(t.$slots,"default")]),_:3},16))}}),Ql={slots:{content:"min-w-32 bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-dropdown-menu-content-transform-origin) flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",arrow:"fill-default",group:"p-1 isolate",label:"w-full flex items-center font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:"group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0",itemTrailingKbdsSize:"",itemLabel:"truncate",itemLabelExternalIcon:"inline-block size-3 align-top text-dimmed"},variants:{color:{primary:"",teacher:"",student:"",red:"",yellow:"",lime:"",green:"",sky:"",neutral:""},active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:text-highlighted data-[state=open]:text-highlighted data-highlighted:before:bg-elevated/50 data-[state=open]:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:text-default group-data-[state=open]:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}},size:{xs:{label:"p-1 text-xs gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},sm:{label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},md:{label:"p-1.5 text-sm gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"md"},lg:{label:"p-2 text-sm gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"md"},xl:{label:"p-2 text-base gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemTrailingIcon:"size-6",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"lg"}}},compoundVariants:[{color:"primary",active:!1,class:{item:"text-primary data-highlighted:text-primary data-highlighted:before:bg-primary/10 data-[state=open]:before:bg-primary/10",itemLeadingIcon:"text-primary/75 group-data-highlighted:text-primary group-data-[state=open]:text-primary"}},{color:"teacher",active:!1,class:{item:"text-teacher data-highlighted:text-teacher data-highlighted:before:bg-teacher/10 data-[state=open]:before:bg-teacher/10",itemLeadingIcon:"text-teacher/75 group-data-highlighted:text-teacher group-data-[state=open]:text-teacher"}},{color:"student",active:!1,class:{item:"text-student data-highlighted:text-student data-highlighted:before:bg-student/10 data-[state=open]:before:bg-student/10",itemLeadingIcon:"text-student/75 group-data-highlighted:text-student group-data-[state=open]:text-student"}},{color:"red",active:!1,class:{item:"text-red data-highlighted:text-red data-highlighted:before:bg-red/10 data-[state=open]:before:bg-red/10",itemLeadingIcon:"text-red/75 group-data-highlighted:text-red group-data-[state=open]:text-red"}},{color:"yellow",active:!1,class:{item:"text-yellow data-highlighted:text-yellow data-highlighted:before:bg-yellow/10 data-[state=open]:before:bg-yellow/10",itemLeadingIcon:"text-yellow/75 group-data-highlighted:text-yellow group-data-[state=open]:text-yellow"}},{color:"lime",active:!1,class:{item:"text-lime data-highlighted:text-lime data-highlighted:before:bg-lime/10 data-[state=open]:before:bg-lime/10",itemLeadingIcon:"text-lime/75 group-data-highlighted:text-lime group-data-[state=open]:text-lime"}},{color:"green",active:!1,class:{item:"text-green data-highlighted:text-green data-highlighted:before:bg-green/10 data-[state=open]:before:bg-green/10",itemLeadingIcon:"text-green/75 group-data-highlighted:text-green group-data-[state=open]:text-green"}},{color:"sky",active:!1,class:{item:"text-sky data-highlighted:text-sky data-highlighted:before:bg-sky/10 data-[state=open]:before:bg-sky/10",itemLeadingIcon:"text-sky/75 group-data-highlighted:text-sky group-data-[state=open]:text-sky"}},{color:"primary",active:!0,class:{item:"text-primary before:bg-primary/10",itemLeadingIcon:"text-primary"}},{color:"teacher",active:!0,class:{item:"text-teacher before:bg-teacher/10",itemLeadingIcon:"text-teacher"}},{color:"student",active:!0,class:{item:"text-student before:bg-student/10",itemLeadingIcon:"text-student"}},{color:"red",active:!0,class:{item:"text-red before:bg-red/10",itemLeadingIcon:"text-red"}},{color:"yellow",active:!0,class:{item:"text-yellow before:bg-yellow/10",itemLeadingIcon:"text-yellow"}},{color:"lime",active:!0,class:{item:"text-lime before:bg-lime/10",itemLeadingIcon:"text-lime"}},{color:"green",active:!0,class:{item:"text-green before:bg-green/10",itemLeadingIcon:"text-green"}},{color:"sky",active:!0,class:{item:"text-sky before:bg-sky/10",itemLeadingIcon:"text-sky"}}],defaultVariants:{size:"md"}},Zl={base:""},Xl={slots:{overlay:"fixed inset-0 bg-elevated/75",content:"fixed bg-default divide-y divide-default flex flex-col focus:outline-none",header:"flex items-center gap-1.5 p-4 sm:px-6 min-h-16",wrapper:"",body:"flex-1 overflow-y-auto p-4 sm:p-6",footer:"flex items-center gap-1.5 p-4 sm:px-6",title:"text-highlighted font-semibold",description:"mt-1 text-muted text-sm",close:"absolute top-4 end-4"},variants:{transition:{true:{overlay:"data-[state=open]:animate-[fade-in_200ms_ease-out] data-[state=closed]:animate-[fade-out_200ms_ease-in]",content:"data-[state=open]:animate-[scale-in_200ms_ease-out] data-[state=closed]:animate-[scale-out_200ms_ease-in]"}},fullscreen:{true:{content:"inset-0"},false:{content:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[calc(100vw-2rem)] max-w-lg max-h-[calc(100dvh-2rem)] sm:max-h-[calc(100dvh-4rem)] rounded-lg shadow-lg ring ring-default overflow-hidden"}}}},en={slots:{base:["relative group rounded-md inline-flex items-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed",value:"truncate pointer-events-none",placeholder:"truncate text-dimmed",arrow:"fill-default",content:["max-h-60 w-(--reka-select-trigger-width) bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-select-content-transform-origin) pointer-events-auto flex flex-col","origin-(--reka-combobox-content-transform-origin) w-(--reka-combobox-trigger-width)"],viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",group:"p-1 isolate",empty:"text-center text-muted",label:"font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:["group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75 text-default data-highlighted:not-data-disabled:text-highlighted data-highlighted:not-data-disabled:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["shrink-0 text-dimmed group-data-highlighted:not-group-data-disabled:text-default","transition-colors"],itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemLeadingChip:"shrink-0",itemLeadingChipSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemLabel:"truncate",input:"border-b border-default",focusScope:"flex flex-col min-h-0"},variants:{buttonGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none focus-visible:z-[1]",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none focus-visible:z-[1]"},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4",label:"p-1 text-[10px]/3 gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemLeadingChip:"size-4",itemLeadingChipSize:"sm",itemTrailingIcon:"size-4",empty:"p-1 text-xs"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4",label:"p-1.5 text-[10px]/3 gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemLeadingChip:"size-4",itemLeadingChipSize:"sm",itemTrailingIcon:"size-4",empty:"p-1.5 text-xs"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5",label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemLeadingChip:"size-5",itemLeadingChipSize:"md",itemTrailingIcon:"size-5",empty:"p-1.5 text-sm"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5",label:"p-2 text-xs gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemLeadingChip:"size-5",itemLeadingChipSize:"md",itemTrailingIcon:"size-5",empty:"p-2 text-sm"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6",label:"p-2 text-sm gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemLeadingChip:"size-6",itemLeadingChipSize:"lg",itemTrailingIcon:"size-6",empty:"p-2 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",teacher:"",student:"",red:"",yellow:"",lime:"",green:"",sky:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"teacher",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-teacher"},{color:"student",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-student"},{color:"red",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-red"},{color:"yellow",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-yellow"},{color:"lime",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-lime"},{color:"green",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-green"},{color:"sky",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-sky"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"teacher",highlight:!0,class:"ring ring-inset ring-teacher"},{color:"student",highlight:!0,class:"ring ring-inset ring-student"},{color:"red",highlight:!0,class:"ring ring-inset ring-red"},{color:"yellow",highlight:!0,class:"ring ring-inset ring-yellow"},{color:"lime",highlight:!0,class:"ring ring-inset ring-lime"},{color:"green",highlight:!0,class:"ring ring-inset ring-green"},{color:"sky",highlight:!0,class:"ring ring-inset ring-sky"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},ca={__name:"DropdownMenuContent",props:{items:{type:null,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0},sub:{type:Boolean,required:!1},labelKey:{type:null,required:!0},checkedIcon:{type:String,required:!1},loadingIcon:{type:String,required:!1},externalIcon:{type:[Boolean,String],required:!1},class:{type:null,required:!1},ui:{type:null,required:!0},uiOverride:{type:null,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(l,{emit:s}){const t=l,a=s,n=rt(),{dir:i}=vt(),c=et(),p=ht(we(()=>t.portal)),f=Xe(_a(t,"sub","items","portal","labelKey","checkedIcon","loadingIcon","externalIcon","class","ui","uiOverride"),a),E=la(n,["default"]),[r,d]=na(),C=G(()=>i.value==="rtl"?c.ui.icons.chevronLeft:c.ui.icons.chevronRight),b=G(()=>{var S;return(S=t.items)!=null&&S.length?oa(t.items)?t.items:[t.items]:[]});return(S,w)=>(o(),P(fe,null,[F(e(r),null,{default:h(({item:g,active:V,index:z})=>[k(S.$slots,g.slot||"item",{item:g,index:z},()=>{var W,I,_,ie,y,q;return[k(S.$slots,g.slot?`${g.slot}-leading`:"item-leading",{item:g,active:V,index:z},()=>{var B,ee,te,oe,le,ne,L,H;return[g.loading?(o(),x(Te,{key:0,name:l.loadingIcon||e(c).ui.icons.loading,class:K(l.ui.itemLeadingIcon({class:[(B=l.uiOverride)==null?void 0:B.itemLeadingIcon,(ee=g.ui)==null?void 0:ee.itemLeadingIcon],color:g==null?void 0:g.color,loading:!0}))},null,8,["name","class"])):g.icon?(o(),x(Te,{key:1,name:g.icon,class:K(l.ui.itemLeadingIcon({class:[(te=l.uiOverride)==null?void 0:te.itemLeadingIcon,(oe=g.ui)==null?void 0:oe.itemLeadingIcon],color:g==null?void 0:g.color,active:V}))},null,8,["name","class"])):g.avatar?(o(),x(ot,R({key:2,size:((le=g.ui)==null?void 0:le.itemLeadingAvatarSize)||((ne=t.uiOverride)==null?void 0:ne.itemLeadingAvatarSize)||l.ui.itemLeadingAvatarSize()},g.avatar,{class:l.ui.itemLeadingAvatar({class:[(L=l.uiOverride)==null?void 0:L.itemLeadingAvatar,(H=g.ui)==null?void 0:H.itemLeadingAvatar],active:V})}),null,16,["size","class"])):U("",!0)]}),e(Se)(g,t.labelKey)||n[g.slot?`${g.slot}-label`:"item-label"]?(o(),P("span",{key:0,class:K(l.ui.itemLabel({class:[(W=l.uiOverride)==null?void 0:W.itemLabel,(I=g.ui)==null?void 0:I.itemLabel],active:V}))},[k(S.$slots,g.slot?`${g.slot}-label`:"item-label",{item:g,active:V,index:z},()=>[me(se(e(Se)(g,t.labelKey)),1)]),g.target==="_blank"&&l.externalIcon!==!1?(o(),x(Te,{key:0,name:typeof l.externalIcon=="string"?l.externalIcon:e(c).ui.icons.external,class:K(l.ui.itemLabelExternalIcon({class:[(_=l.uiOverride)==null?void 0:_.itemLabelExternalIcon,(ie=g.ui)==null?void 0:ie.itemLabelExternalIcon],color:g==null?void 0:g.color,active:V}))},null,8,["name","class"])):U("",!0)],2)):U("",!0),ue("span",{class:K(l.ui.itemTrailing({class:[(y=l.uiOverride)==null?void 0:y.itemTrailing,(q=g.ui)==null?void 0:q.itemTrailing]}))},[k(S.$slots,g.slot?`${g.slot}-trailing`:"item-trailing",{item:g,active:V,index:z},()=>{var B,ee,te,oe,le,ne;return[(B=g.children)!=null&&B.length?(o(),x(Te,{key:0,name:C.value,class:K(l.ui.itemTrailingIcon({class:[(ee=l.uiOverride)==null?void 0:ee.itemTrailingIcon,(te=g.ui)==null?void 0:te.itemTrailingIcon],color:g==null?void 0:g.color,active:V}))},null,8,["name","class"])):(oe=g.kbds)!=null&&oe.length?(o(),P("span",{key:1,class:K(l.ui.itemTrailingKbds({class:[(le=l.uiOverride)==null?void 0:le.itemTrailingKbds,(ne=g.ui)==null?void 0:ne.itemTrailingKbds]}))},[(o(!0),P(fe,null,be(g.kbds,(L,H)=>{var v,u;return o(),x(Ta,R({key:H,size:((v=g.ui)==null?void 0:v.itemTrailingKbdsSize)||((u=t.uiOverride)==null?void 0:u.itemTrailingKbdsSize)||l.ui.itemTrailingKbdsSize()},{ref_for:!0},typeof L=="string"?{value:L}:L),null,16,["size"])}),128))],2)):U("",!0)]}),F(e($e).ItemIndicator,{"as-child":""},{default:h(()=>{var B,ee;return[F(Te,{name:l.checkedIcon||e(c).ui.icons.check,class:K(l.ui.itemTrailingIcon({class:[(B=l.uiOverride)==null?void 0:B.itemTrailingIcon,(ee=g.ui)==null?void 0:ee.itemTrailingIcon],color:g==null?void 0:g.color}))},null,8,["name","class"])]}),_:2},1024)],2)]})]),_:3}),F(e($e).Portal,ke(Ae(e(p))),{default:h(()=>[(o(),x(it(l.sub?e($e).SubContent:e($e).Content),R({class:t.class},e(f)),{default:h(()=>{var g;return[k(S.$slots,"content-top"),ue("div",{role:"presentation",class:K(l.ui.viewport({class:(g=t.ui)==null?void 0:g.viewport}))},[(o(!0),P(fe,null,be(b.value,(V,z)=>{var W;return o(),x(e($e).Group,{key:`group-${z}`,class:K(l.ui.group({class:(W=l.uiOverride)==null?void 0:W.group}))},{default:h(()=>[(o(!0),P(fe,null,be(V,(I,_)=>{var ie,y,q,B,ee,te,oe;return o(),P(fe,{key:`group-${z}-${_}`},[I.type==="label"?(o(),x(e($e).Label,{key:0,class:K(l.ui.label({class:[(ie=l.uiOverride)==null?void 0:ie.label,(y=I.ui)==null?void 0:y.label,I.class]}))},{default:h(()=>[F(e(d),{item:I,index:_},null,8,["item","index"])]),_:2},1032,["class"])):I.type==="separator"?(o(),x(e($e).Separator,{key:1,class:K(l.ui.separator({class:[(q=l.uiOverride)==null?void 0:q.separator,(B=I.ui)==null?void 0:B.separator,I.class]}))},null,8,["class"])):(ee=I==null?void 0:I.children)!=null&&ee.length?(o(),x(e($e).Sub,{key:2,open:I.open,"default-open":I.defaultOpen},{default:h(()=>{var le,ne;return[F(e($e).SubTrigger,{as:"button",type:"button",disabled:I.disabled,"text-value":e(Se)(I,t.labelKey),class:K(l.ui.item({class:[(le=l.uiOverride)==null?void 0:le.item,(ne=I.ui)==null?void 0:ne.item,I.class],color:I==null?void 0:I.color}))},{default:h(()=>[F(e(d),{item:I,index:_},null,8,["item","index"])]),_:2},1032,["disabled","text-value","class"]),F(ca,R({sub:"",class:t.class,ui:l.ui,"ui-override":l.uiOverride,portal:l.portal,items:I.children,align:"start","align-offset":-4,"side-offset":3,"label-key":l.labelKey,"checked-icon":l.checkedIcon,"loading-icon":l.loadingIcon,"external-icon":l.externalIcon},{ref_for:!0},I.content),sa({_:2},[be(e(E),(L,H)=>({name:H,fn:h(v=>[k(S.$slots,H,R({ref_for:!0},v))])}))]),1040,["class","ui","ui-override","portal","items","label-key","checked-icon","loading-icon","external-icon"])]}),_:2},1032,["open","default-open"])):I.type==="checkbox"?(o(),x(e($e).CheckboxItem,{key:3,"model-value":I.checked,disabled:I.disabled,"text-value":e(Se)(I,t.labelKey),class:K(l.ui.item({class:[(te=l.uiOverride)==null?void 0:te.item,(oe=I.ui)==null?void 0:oe.item,I.class],color:I==null?void 0:I.color})),"onUpdate:modelValue":I.onUpdateChecked,onSelect:I.onSelect},{default:h(()=>[F(e(d),{item:I,index:_},null,8,["item","index"])]),_:2},1032,["model-value","disabled","text-value","class","onUpdate:modelValue","onSelect"])):(o(),x(e($e).Item,{key:4,"as-child":"",disabled:I.disabled,"text-value":e(Se)(I,t.labelKey),onSelect:I.onSelect},{default:h(()=>[F(La,R({ref_for:!0},e(Ba)(I),{custom:""}),{default:h(({active:le,...ne})=>{var L,H;return[F(Aa,R({ref_for:!0},ne,{class:l.ui.item({class:[(L=l.uiOverride)==null?void 0:L.item,(H=I.ui)==null?void 0:H.item,I.class],color:I==null?void 0:I.color,active:le})}),{default:h(()=>[F(e(d),{item:I,active:le,index:_},null,8,["item","active","index"])]),_:2},1040,["class"])]}),_:2},1040)]),_:2},1032,["disabled","text-value","onSelect"]))],64)}),128))]),_:2},1032,["class"])}),128))],2),k(S.$slots,"default"),k(S.$slots,"content-bottom")]}),_:3},16,["class"]))]),_:3},16)],64))}},tn={__name:"DropdownMenu",props:{size:{type:null,required:!1},items:{type:null,required:!1},checkedIcon:{type:String,required:!1},loadingIcon:{type:String,required:!1},externalIcon:{type:[Boolean,String],required:!1,default:!0},content:{type:Object,required:!1},arrow:{type:[Boolean,Object],required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},labelKey:{type:null,required:!1,default:"label"},disabled:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(l,{emit:s}){const t=l,a=s,n=rt(),i=et(),c=Xe(yt(t,"defaultOpen","open","modal"),a),p=we(()=>nt(t.content,{side:"bottom",sideOffset:8,collisionPadding:8})),f=we(()=>t.arrow),E=la(n,["default"]),r=G(()=>{var d;return ze({extend:ze(Ql),...((d=i.ui)==null?void 0:d.dropdownMenu)||{}})({size:t.size})});return(d,C)=>(o(),x(e(za),ke(Ae(e(c))),{default:h(({open:b})=>{var S;return[n.default?(o(),x(e(Fa),{key:0,"as-child":"",class:K(t.class),disabled:l.disabled},{default:h(()=>[k(d.$slots,"default",{open:b})]),_:2},1032,["class","disabled"])):U("",!0),F(ca,R({class:r.value.content({class:[!n.default&&t.class,(S=t.ui)==null?void 0:S.content]}),ui:r.value,"ui-override":t.ui},p.value,{items:l.items,portal:l.portal,"label-key":l.labelKey,"checked-icon":l.checkedIcon,"loading-icon":l.loadingIcon,"external-icon":l.externalIcon}),sa({default:h(()=>{var w;return[l.arrow?(o(),x(e(qa),R({key:0},f.value,{class:r.value.arrow({class:(w=t.ui)==null?void 0:w.arrow})}),null,16,["class"])):U("",!0)]}),_:2},[be(e(E),(w,g)=>({name:g,fn:h(V=>[k(d.$slots,g,ke(Ae(V)))])}))]),1040,["class","ui","ui-override","items","portal","label-key","checked-icon","loading-icon","external-icon"])]}),_:3},16))}},an={class:"flex flex-row items-center gap-4 w-full px-4 py-2"},ln={class:"flex items-center gap-2"},nn={for:"table-select"},on={class:"ml-auto text-sm text-gray-500 font-mono flex items-center"},sn={class:"ml-2 p-2 bg-gray-100 rounded text-xs"},rn={class:"min-w-full divide-y divide-gray-200 my-4 rounded shadow custom-table-bg"},un=["id","onClick"],dn=["id","onClick"],cn={key:0,class:"px-4 py-2 text-left font-semibold"},pn={key:1,class:"flex items-center gap-3"},fn={class:"font-medium text-highlighted"},mn={key:0},gn={key:2,class:"flex flex-wrap gap-1"},vn={key:0,class:"px-4 py-2"},hn={key:1,class:"px-4 py-2"},yn={key:0},bn=["colspan"],xn=Z({__name:"TableView",props:{system:{},tableNames:{},selectedTableName:{},selectedTableData:{},columnNames:{},columnTypes:{},tableInfo:{},columnValuesMap:{},onSortChange:{type:Function},onFilterChange:{type:Function},onTableSelect:{type:Function},onAdd:{type:Function},onEdit:{type:Function},onDelete:{type:Function}},emits:["table-select","add","edit","delete","open-editor","sort-change","filter-change"],setup(l,{expose:s,emit:t}){bt();const a=ct(),{t:n}=xt();St(),Da();const i=Ka,c=It,p=tn,f=l,E=t,r=j(""),d=j({field:null,order:null}),C=j(null),b=j(!1),S=j(""),w=j(""),g=G(()=>f.selectedTableData),V=G(()=>{const v=f.columnNames;console.log("KEYS:",v);const u=v.map(m=>({accessorKey:m,header:()=>q(m.charAt(0).toUpperCase()+m.slice(1),m)}));return console.log("COLUMNS:",u),f.columnNames.includes("alergeny")&&console.log("Data for Alergeny:",g.value.map(m=>m.Alergeny)),[...u,{id:"action",header:"Akce"}]}),z=G(()=>{let v=[...g.value];if(r.value.trim()){const u=r.value.toLowerCase();v=v.filter(m=>Object.values(m).some(T=>String(T).toLowerCase().includes(u)))}return d.value.field&&d.value.order&&v.sort((u,m)=>{const T=d.value.field,N=u[T],J=m[T];return N==null&&J==null?0:N==null?1:J==null?-1:typeof N=="number"&&typeof J=="number"?d.value.order==="asc"?N-J:J-N:d.value.order==="asc"?String(N).localeCompare(String(J)):String(J).localeCompare(String(N))}),v});G(()=>!f.selectedTableName||f.columnNames.length===0?"":`SELECT ${f.columnNames.map(u=>`"${u}"`).join(", ")} FROM ${f.selectedTableName}`),Ee(r,v=>{E("filter-change",v)},{debounce:300}),ia(a.highlightHandler,a),Ee(b,v=>{console.log("Editor visibility changed:",v)});function W(v){if(!v)return!1;if(Array.isArray(v))return!0;if(typeof v=="string"){const u=v.trim();return u.startsWith("[")&&u.endsWith("]")}return!1}function I(v){if(!v)return[];if(Array.isArray(v))return v;if(typeof v=="string")try{const u=JSON.parse(v);return Array.isArray(u)?u:[]}catch{const m=v.replace(/^\[|\]$/g,"").trim();if(m)return m.split(",").map(T=>T.trim().replace(/^"|"$/g,""))}return[]}function _(v,u){return`ORDER BY ${v.replace(/[^a-zA-Z0-9_]/g,"")} ${u.toUpperCase()}`}function ie(v,u){if(!v.trim())return"";const m=v.replace(/'/g,"''");return`WHERE (${u.map(N=>`${N.replace(/[^a-zA-Z0-9_]/g,"")} LIKE '%${m}%'`).join(" OR ")})`}function y(v){let u="asc";if(d.value.field===v&&(d.value.order==="asc"?u="desc":d.value.order==="desc"&&(u=null)),d.value={field:u?v:null,order:u},E("sort-change",v,u),u){const m=_(v,u);console.log("Generated SQL ORDER BY:",m)}}function q(v,u){const m=d.value.field===u,T=m?d.value.order:null;return Va("button",{class:["sort-header",m?"active":"",T==="asc"?"asc":"",T==="desc"?"desc":""],onClick:()=>y(u),style:{background:"none",border:"none",cursor:"pointer",fontWeight:m?"bold":"normal",color:m?"#2563EB":"inherit",outline:"none",padding:"0"}},[v,T==="asc"?" ":T==="desc"?" ":""])}function B(v){return[{label:n("edit"),icon:"i-lucide-edit",onSelect:()=>E("edit",v)},{label:n("delete"),icon:"i-lucide-trash",color:"error",onSelect:()=>E("delete",v)}]}function ee(v,u){let m=v;if(r.value.trim()){const T=ie(r.value,u);T&&(m+=` ${T}`)}if(d.value.field&&d.value.order){const T=_(d.value.field,d.value.order);m+=` ${T}`}return m}function te(){E("add")}function oe(v){if(C.value=v.accessorKey||v.id,w.value="",f.selectedTableName&&C.value){let u="";d.value.field===C.value&&d.value.order&&(u=` ORDER BY "${C.value}" ${d.value.order.toUpperCase()}`),S.value=`SELECT "${C.value}" FROM ${f.selectedTableName}${u}`}else S.value="";b.value=!0,E("open-editor",v)}function le(){b.value=!1,console.log("Changes applied:",{draftSqlQuery:S.value,draftHtmlTemplate:w.value,show:b.value})}function ne(v){E("table-select",v)}function L(v){if(!v)return"";const u=new Date(v);return isNaN(u.getTime())?v:`${u.getDate().toString().padStart(2,"0")}.${(u.getMonth()+1).toString().padStart(2,"0")}.${u.getFullYear()}`}function H(v,u){if(!v||!u)return"";const m=new Date(v),T=new Date(u);return isNaN(m.getTime())||isNaN(T.getTime())?"":Math.max(0,Math.round((T.getTime()-m.getTime())/(1e3*60*60*24)))}return he(()=>{const v=ct();console.log("HIGHLIGHT  ON:",v.isHighlightMode),console.log(v.highlightHandler.getHighlightedElements)}),s({getSqlQuery:ee,currentSort:Me(d),globalFilter:Me(r)}),(v,u)=>{const m=sl,T=Ct,N=rl,J=ot;return o(),P("div",null,[ue("div",an,[ue("div",ln,[ue("label",nn,se(e(n)("select_table"))+":",1),F(m,{"model-value":v.selectedTableName,items:v.tableNames,class:"w-48","onUpdate:modelValue":ne},null,8,["model-value","items"])]),F(e(c),{variant:"subtle",onClick:te},{default:h(()=>[me(se(e(n)("add")),1)]),_:1}),F(T,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=O=>r.value=O),class:"max-w-sm",placeholder:`${e(n)("filter")} ${v.selectedTableName||"items"}...`},null,8,["modelValue","placeholder"]),ue("div",on,[ue("span",null,se(e(n)("sql_query"))+":",1),ue("span",sn,se(ee(`SELECT * FROM ${v.selectedTableName||"table"}`,V.value.map(O=>(O==null?void 0:O.accessorKey)||"").filter(Boolean))),1)])]),ue("table",rn,[ue("thead",null,[ue("tr",null,[(o(!0),P(fe,null,be(V.value.filter(O=>O.id!=="action"),O=>(o(),P("th",{key:O.accessorKey||O.id,class:"px-4 py-2 text-left font-semibold relative"},[typeof O.header=="function"?(o(),P("span",{key:0,id:`table-${O.accessorKey}`,class:"highlightable",onClick:re=>e(a).isHighlightMode&&e(a).highlightHandler.selectElement(`table-${O.accessorKey}`,re)},[(o(),x(it(O.header())))],8,un)):(o(),P("span",{key:1,id:`table-${O.accessorKey}`,class:"highlightable",onClick:re=>e(a).isHighlightMode&&e(a).highlightHandler.selectElement(`table-${O.accessorKey}`,re)},se(O.header),9,dn)),e(a).isEditModeActive?(o(),x(N,{key:2,onClick:re=>oe(O)},null,8,["onClick"])):U("",!0)]))),128)),v.columnNames.includes("od")&&v.columnNames.includes("do")?(o(),P("th",cn," Dlka ")):U("",!0)])]),ue("tbody",null,[(o(!0),P(fe,null,be(z.value,(O,re)=>(o(),P("tr",{key:O.id||re,class:"hover:border hover:border-gray-400 border-collapse"},[(o(!0),P(fe,null,be(V.value.filter(ae=>ae.id!=="action"),ae=>(o(),P("td",{key:ae.accessorKey||ae.id,class:"px-4 py-2"},[ae.accessorKey==="od"||ae.accessorKey==="do"?(o(),P(fe,{key:0},[me(se(L(O[ae.accessorKey])),1)],64)):ae.accessorKey==="name"?(o(),P("div",pn,[O.id?(o(),x(J,{key:0,size:"lg",alt:`${O.name||O.id} avatar`},null,8,["alt"])):U("",!0),ue("div",null,[ue("p",fn,se(O.name),1),O.age?(o(),P("p",mn,se(O.age),1)):U("",!0)])])):W(O[ae.accessorKey])?(o(),P("div",gn,[(o(!0),P(fe,null,be(I(O[ae.accessorKey]),(ve,$)=>(o(),x(e(i),{key:$,size:"md"},{default:h(()=>[me(se(ve),1)]),_:2},1024))),128))])):(o(),P(fe,{key:3},[me(se(O[ae.accessorKey]),1)],64))]))),128)),v.columnNames.includes("od")&&v.columnNames.includes("do")?(o(),P("td",vn,se(H(O.od,O.do)),1)):U("",!0),V.value.some(ae=>ae.id==="action")?(o(),P("td",hn,[F(e(p),{items:B(O)},{default:h(()=>[F(e(c),{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost","aria-label":"Actions"})]),_:2},1032,["items"])])):U("",!0)]))),128)),z.value.length===0?(o(),P("tr",yn,[ue("td",{colspan:V.value.length,class:"text-center text-gray-400 py-4"},se(e(n)("no_data")),9,bn)])):U("",!0)])]),F(e(il),{showEditor:b.value,draftHtmlTemplate:w.value,draftSqlQuery:S.value,"onUpdate:showEditor":u[1]||(u[1]=O=>b.value=O),"onUpdate:draftHtmlTemplate":u[2]||(u[2]=O=>w.value=O),"onUpdate:draftSqlQuery":u[3]||(u[3]=O=>S.value=O),onApplyChanges:le},null,8,["showEditor","draftHtmlTemplate","draftSqlQuery"])])}}}),Sn=Ma(xn,[["__scopeId","data-v-d3d0568c"]]),Cn=Object.assign({inheritAttrs:!1},{__name:"SelectMenu",props:Rt({id:{type:String,required:!1},placeholder:{type:String,required:!1},searchInput:{type:[Boolean,Object],required:!1,default:!0},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1},selectedIcon:{type:String,required:!1},content:{type:Object,required:!1},arrow:{type:[Boolean,Object],required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},valueKey:{type:null,required:!1},labelKey:{type:null,required:!1,default:"label"},items:{type:null,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},createItem:{type:[Boolean,String,Object],required:!1},filterFields:{type:Array,required:!1},ignoreFilter:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},highlightOnHover:{type:Boolean,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:Rt(["update:open","change","blur","focus","create","highlight","update:modelValue"],["update:searchTerm"]),setup(l,{expose:s,emit:t}){const a=l,n=t,i=rt(),c=Pa(l,"searchTerm",{type:String,default:""}),{t:p}=vt(),f=et(),{contains:E}=ua({sensitivity:"base"}),r=Xe(yt(a,"modelValue","defaultValue","open","defaultOpen","required","multiple","resetSearchTermOnBlur","resetSearchTermOnSelect","highlightOnHover"),n),d=ht(we(()=>a.portal)),C=we(()=>nt(a.content,{side:"bottom",sideOffset:8,collisionPadding:8,position:"popper"})),b=we(()=>a.arrow),S=we(()=>nt(a.searchInput,{placeholder:p("selectMenu.search"),variant:"none"})),{emitFormBlur:w,emitFormFocus:g,emitFormInput:V,emitFormChange:z,size:W,color:I,id:_,name:ie,highlight:y,disabled:q,ariaAttrs:B}=Na(a),{orientation:ee,size:te}=Ra(a),{isLeading:oe,isTrailing:le,leadingIconName:ne,trailingIconName:L}=Ha(we(()=>nt(a,{trailingIcon:f.ui.icons.chevronDown}))),H=G(()=>te.value||W.value),[v,u]=na(),m=G(()=>{var A;return ze({extend:ze(en),...((A=f.ui)==null?void 0:A.selectMenu)||{}})({color:I.value,variant:a.variant,size:H==null?void 0:H.value,loading:a.loading,highlight:y.value,leading:oe.value||!!a.avatar||!!i.leading,trailing:le.value||!!i.trailing,buttonGroup:ee.value})});function T(A){if(a.multiple&&Array.isArray(A)){const X=A.map(Ie=>T(Ie)).filter(Boolean);return X!=null&&X.length?X.join(", "):void 0}if(!a.valueKey)return A&&(typeof A=="object"?Se(A,a.labelKey):A);const Q=J.value.find(X=>Ht(typeof X=="object"?Se(X,a.valueKey):X,A));return Q&&(typeof Q=="object"?Se(Q,a.labelKey):Q)}const N=G(()=>{var A;return(A=a.items)!=null&&A.length?oa(a.items)?a.items:[a.items]:[]}),J=G(()=>N.value.flatMap(A=>A)),O=G(()=>{if(a.ignoreFilter||!c.value)return N.value;const A=Array.isArray(a.filterFields)?a.filterFields:[a.labelKey];return N.value.map(Q=>Q.filter(X=>typeof X!="object"||X===null?E(String(X),c.value):X.type&&["label","separator"].includes(X.type)?!0:A.some(Ie=>E(Se(X,Ie),c.value)))).filter(Q=>Q.filter(X=>!ce(X)||!X.type||!["label","separator"].includes(X.type)).length>0)}),re=G(()=>O.value.flatMap(A=>A)),ae=G(()=>{if(!a.createItem||!c.value)return!1;const A=a.valueKey?{[a.valueKey]:c.value}:c.value;return typeof a.createItem=="object"&&a.createItem.when==="always"||a.createItem==="always"?!re.value.find(Q=>Ht(Q,A,a.valueKey)):!re.value.length}),ve=G(()=>typeof a.createItem=="object"?a.createItem.position:"bottom"),$=j(null);function M(){var A,Q;a.autofocus&&((Q=(A=$.value)==null?void 0:A.$el)==null||Q.focus({focusVisible:!0}))}he(()=>{setTimeout(()=>{M()},a.autofocusDelay)});function Y(A){if(ja(a.modelValue)===A)return;const Q=new Event("change",{target:{value:A}});n("change",Q),z(),V(),a.resetSearchTermOnSelect&&(c.value="")}function de(A){let Q;if(A){const X=new FocusEvent("focus");n("focus",X),g(),clearTimeout(Q)}else{const X=new FocusEvent("blur");n("blur",X),w(),a.resetSearchTermOnBlur&&(Q=setTimeout(()=>{c.value=""},100))}}function Ce(A,Q){var X;if(ce(Q)){if(Q.disabled){A.preventDefault();return}(X=Q.onSelect)==null||X.call(Q,A)}}function ce(A){return typeof A=="object"&&A!==null}return s({triggerRef:$}),(A,Q)=>(o(),P(fe,null,[F(e(v),null,{default:h(()=>{var X;return[F(e(Yt),{class:K(m.value.group({class:(X=a.ui)==null?void 0:X.group}))},{default:h(()=>{var Ie;return[F(e(Jt),{class:K(m.value.item({class:(Ie=a.ui)==null?void 0:Ie.item})),value:c.value,onSelect:Q[0]||(Q[0]=Ke(_e=>n("create",c.value),["prevent"]))},{default:h(()=>{var _e;return[ue("span",{class:K(m.value.itemLabel({class:(_e=a.ui)==null?void 0:_e.itemLabel}))},[k(A.$slots,"create-item-label",{item:c.value},()=>[me(se(e(p)("selectMenu.create",{label:c.value})),1)])],2)]}),_:3},8,["class","value"])]}),_:3},8,["class"])]}),_:3}),F(e(wl),R({id:e(_)},{...e(r),...A.$attrs,...e(B)},{"ignore-filter":"","as-child":"",name:e(ie),disabled:e(q),"onUpdate:modelValue":Y,"onUpdate:open":de}),{default:h(({modelValue:X,open:Ie})=>[F(e(Sl),{"as-child":""},{default:h(()=>{var _e;return[F(e(Yl),{ref_key:"triggerRef",ref:$,class:K(m.value.base({class:[(_e=a.ui)==null?void 0:_e.base,a.class]})),tabindex:"0"},{default:h(()=>{var He,Ue;return[e(oe)||l.avatar||i.leading?(o(),P("span",{key:0,class:K(m.value.leading({class:(He=a.ui)==null?void 0:He.leading}))},[k(A.$slots,"leading",{modelValue:X,open:Ie,ui:m.value},()=>{var ye,Fe,xe;return[e(oe)&&e(ne)?(o(),x(Te,{key:0,name:e(ne),class:K(m.value.leadingIcon({class:(ye=a.ui)==null?void 0:ye.leadingIcon}))},null,8,["name","class"])):l.avatar?(o(),x(ot,R({key:1,size:((Fe=a.ui)==null?void 0:Fe.itemLeadingAvatarSize)||m.value.itemLeadingAvatarSize()},l.avatar,{class:m.value.itemLeadingAvatar({class:(xe=a.ui)==null?void 0:xe.itemLeadingAvatar})}),null,16,["size","class"])):U("",!0)]})],2)):U("",!0),k(A.$slots,"default",{modelValue:X,open:Ie},()=>[(o(!0),P(fe,null,be([T(X)],ye=>{var Fe,xe;return o(),P(fe,{key:ye},[ye!=null?(o(),P("span",{key:0,class:K(m.value.value({class:(Fe=a.ui)==null?void 0:Fe.value}))},se(ye),3)):(o(),P("span",{key:1,class:K(m.value.placeholder({class:(xe=a.ui)==null?void 0:xe.placeholder}))},se(l.placeholder??""),3))],64)}),128))]),e(le)||i.trailing?(o(),P("span",{key:1,class:K(m.value.trailing({class:(Ue=a.ui)==null?void 0:Ue.trailing}))},[k(A.$slots,"trailing",{modelValue:X,open:Ie,ui:m.value},()=>{var ye;return[e(L)?(o(),x(Te,{key:0,name:e(L),class:K(m.value.trailingIcon({class:(ye=a.ui)==null?void 0:ye.trailingIcon}))},null,8,["name","class"])):U("",!0)]})],2)):U("",!0)]}),_:2},1032,["class"])]}),_:2},1024),F(e(Gl),ke(Ae(e(d))),{default:h(()=>{var _e;return[F(e(Al),R({class:m.value.content({class:(_e=a.ui)==null?void 0:_e.content})},C.value),{default:h(()=>{var He,Ue;return[F(e(Zt),{trapped:"",class:K(m.value.focusScope({class:(He=a.ui)==null?void 0:He.focusScope}))},{default:h(()=>{var ye,Fe;return[k(A.$slots,"content-top"),l.searchInput?(o(),x(e(Vl),{key:0,modelValue:c.value,"onUpdate:modelValue":Q[1]||(Q[1]=xe=>c.value=xe),"display-value":()=>c.value,"as-child":""},{default:h(()=>{var xe;return[F(Ct,R({autofocus:"",autocomplete:"off",size:l.size},S.value,{class:m.value.input({class:(xe=a.ui)==null?void 0:xe.input})}),null,16,["size","class"])]}),_:1},8,["modelValue","display-value"])):U("",!0),F(e(Fl),{class:K(m.value.empty({class:(ye=a.ui)==null?void 0:ye.empty}))},{default:h(()=>[k(A.$slots,"empty",{searchTerm:c.value},()=>[me(se(c.value?e(p)("selectMenu.noMatch",{searchTerm:c.value}):e(p)("selectMenu.noData")),1)])]),_:3},8,["class"]),ue("div",{role:"presentation",class:K(m.value.viewport({class:(Fe=a.ui)==null?void 0:Fe.viewport}))},[ae.value&&ve.value==="top"?(o(),x(e(u),{key:0})):U("",!0),(o(!0),P(fe,null,be(O.value,(xe,$t)=>{var Et;return o(),x(e(Yt),{key:`group-${$t}`,class:K(m.value.group({class:(Et=a.ui)==null?void 0:Et.group}))},{default:h(()=>[(o(!0),P(fe,null,be(xe,(D,je)=>{var kt,wt,Ot,_t,Tt,Lt;return o(),P(fe,{key:`group-${$t}-${je}`},[ce(D)&&D.type==="label"?(o(),x(e(jl),{key:0,class:K(m.value.label({class:[(kt=a.ui)==null?void 0:kt.label,(wt=D.ui)==null?void 0:wt.label,D.class]}))},{default:h(()=>[me(se(e(Se)(D,a.labelKey)),1)]),_:2},1032,["class"])):ce(D)&&D.type==="separator"?(o(),x(e(Wl),{key:1,class:K(m.value.separator({class:[(Ot=a.ui)==null?void 0:Ot.separator,(_t=D.ui)==null?void 0:_t.separator,D.class]}))},null,8,["class"])):(o(),x(e(Jt),{key:2,class:K(m.value.item({class:[(Tt=a.ui)==null?void 0:Tt.item,ce(D)&&((Lt=D.ui)==null?void 0:Lt.item),ce(D)&&D.class]})),disabled:ce(D)&&D.disabled,value:a.valueKey&&ce(D)?e(Se)(D,a.valueKey):D,onSelect:tt=>Ce(tt,D)},{default:h(()=>[k(A.$slots,"item",{item:D,index:je},()=>{var tt,Bt,At,Ft;return[k(A.$slots,"item-leading",{item:D,index:je},()=>{var Ge,We,qt,zt,Dt,Kt,Vt,Mt,Pt;return[ce(D)&&D.icon?(o(),x(Te,{key:0,name:D.icon,class:K(m.value.itemLeadingIcon({class:[(Ge=a.ui)==null?void 0:Ge.itemLeadingIcon,(We=D.ui)==null?void 0:We.itemLeadingIcon]}))},null,8,["name","class"])):ce(D)&&D.avatar?(o(),x(ot,R({key:1,size:((qt=D.ui)==null?void 0:qt.itemLeadingAvatarSize)||((zt=a.ui)==null?void 0:zt.itemLeadingAvatarSize)||m.value.itemLeadingAvatarSize()},{ref_for:!0},D.avatar,{class:m.value.itemLeadingAvatar({class:[(Dt=a.ui)==null?void 0:Dt.itemLeadingAvatar,(Kt=D.ui)==null?void 0:Kt.itemLeadingAvatar]})}),null,16,["size","class"])):ce(D)&&D.chip?(o(),x(Ua,R({key:2,size:((Vt=a.ui)==null?void 0:Vt.itemLeadingChipSize)||m.value.itemLeadingChipSize(),inset:"",standalone:""},{ref_for:!0},D.chip,{class:m.value.itemLeadingChip({class:[(Mt=a.ui)==null?void 0:Mt.itemLeadingChip,(Pt=D.ui)==null?void 0:Pt.itemLeadingChip]})}),null,16,["size","class"])):U("",!0)]}),ue("span",{class:K(m.value.itemLabel({class:[(tt=a.ui)==null?void 0:tt.itemLabel,ce(D)&&((Bt=D.ui)==null?void 0:Bt.itemLabel)]}))},[k(A.$slots,"item-label",{item:D,index:je},()=>[me(se(ce(D)?e(Se)(D,a.labelKey):D),1)])],2),ue("span",{class:K(m.value.itemTrailing({class:[(At=a.ui)==null?void 0:At.itemTrailing,ce(D)&&((Ft=D.ui)==null?void 0:Ft.itemTrailing)]}))},[k(A.$slots,"item-trailing",{item:D,index:je}),F(e(Ul),{"as-child":""},{default:h(()=>{var Ge,We;return[F(Te,{name:l.selectedIcon||e(f).ui.icons.check,class:K(m.value.itemTrailingIcon({class:[(Ge=a.ui)==null?void 0:Ge.itemTrailingIcon,ce(D)&&((We=D.ui)==null?void 0:We.itemTrailingIcon)]}))},null,8,["name","class"])]}),_:2},1024)],2)]})]),_:2},1032,["class","disabled","value","onSelect"]))],64)}),128))]),_:2},1032,["class"])}),128)),ae.value&&ve.value==="bottom"?(o(),x(e(u),{key:1})):U("",!0)],2),k(A.$slots,"content-bottom")]}),_:3},8,["class"]),l.arrow?(o(),x(e(Bl),R({key:0},b.value,{class:m.value.arrow({class:(Ue=a.ui)==null?void 0:Ue.arrow})}),null,16,["class"])):U("",!0)]}),_:3},16,["class"])]}),_:3},16)]),_:3},16,["id","name","disabled"])],64))}});function In(l){return l.validate&&l.__isYupSchema__}function $n(l){return l.inner!==void 0}function En(l){return"schema"in l&&typeof l.coercer=="function"&&typeof l.validator=="function"&&typeof l.refiner=="function"}function kn(l){return l.validateAsync!==void 0&&l.id!==void 0}function wn(l){return l.isJoi===!0}function On(l){return"~standard"in l}async function _n(l,s){var a;const t=await s["~standard"].validate(l);return t.issues?{errors:((a=t.issues)==null?void 0:a.map(n=>{var i;return{name:((i=n.path)==null?void 0:i.map(c=>typeof c=="object"?c.key:c).join("."))||"",message:n.message}}))||[],result:null}:{errors:null,result:t.value}}async function Tn(l,s){try{return{errors:null,result:await s.validate(l,{abortEarly:!1})}}catch(t){if($n(t))return{errors:t.inner.map(n=>({name:n.path??"",message:n.message})),result:null};throw t}}async function Ln(l,s){const[t,a]=s.validate(l);return t?{errors:t.failures().map(i=>({message:i.message,name:i.path.join(".")})),result:null}:{errors:null,result:a}}async function Bn(l,s){try{return{errors:null,result:await s.validateAsync(l,{abortEarly:!1})}}catch(t){if(wn(t))return{errors:t.details.map(n=>({name:n.path.join("."),message:n.message})),result:null};throw t}}function An(l,s){if(On(s))return _n(l,s);if(kn(s))return Bn(l,s);if(In(s))return Tn(l,s);if(En(s))return Ln(l,s);throw new Error("Form validation failed: Unsupported form schema")}class Qe extends Error{constructor(t,a,n){super("Form validation exception");at(this,"formId");at(this,"errors");at(this,"children");this.formId=t,this.errors=a,this.children=n,Object.setPrototypeOf(this,Qe.prototype)}}const Fn={__name:"Form",props:{id:{type:[String,Number],required:!1},schema:{type:null,required:!1},state:{type:Object,required:!0},validate:{type:Function,required:!1},validateOn:{type:Array,required:!1,default(){return["input","blur","change"]}},disabled:{type:Boolean,required:!1},validateOnInputDelay:{type:Number,required:!1,default:300},transform:{type:null,required:!1,default:()=>!0},attach:{type:Boolean,required:!1,default:!0},loadingAuto:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},onSubmit:{type:Function,required:!1}},emits:["submit","error"],setup(l,{expose:s,emit:t}){const a=l,n=t,i=et(),c=G(()=>{var y;return ze({extend:ze(Zl),...((y=i.ui)==null?void 0:y.form)||{}})}),p=a.id??Ga(),f=Ya(`form-${p}`),E=a.attach&&Wa(Ut,void 0);Ye(Ut,f);const r=j(new Map);he(async()=>{f.on(async y=>{var q;y.type==="attach"?r.value.set(y.formId,{validate:y.validate}):y.type==="detach"?r.value.delete(y.formId):(q=a.validateOn)!=null&&q.includes(y.type)&&!I.value&&(y.type!=="input"?await W({name:y.name,silent:!0,nested:!1}):(y.eager||w.has(y.name))&&await W({name:y.name,silent:!0,nested:!1})),y.type==="blur"&&w.add(y.name),(y.type==="change"||y.type==="input"||y.type==="blur"||y.type==="focus")&&S.add(y.name),(y.type==="change"||y.type==="input")&&b.add(y.name)})}),Re(()=>{f.reset()}),he(async()=>{E&&(await Le(),E.emit({type:"attach",validate:W,formId:p}))}),Re(()=>{E&&E.emit({type:"detach",formId:p})});const d=j([]);Ye("form-errors",d);const C=j({});Ye(Za,C);const b=qe(new Set),S=qe(new Set),w=qe(new Set);function g(y){return y.map(q=>{var B;return{...q,id:q!=null&&q.name?(B=C.value[q.name])==null?void 0:B.id:void 0}})}const V=j(null);async function z(){let y=a.validate?await a.validate(a.state)??[]:[];if(a.schema){const{errors:q,result:B}=await An(a.state,a.schema);q?y=y.concat(q):V.value=B}return g(y)}async function W(y={silent:!1,nested:!0,transform:!1}){const q=y.name&&!Array.isArray(y.name)?[y.name]:y.name,B=!q&&y.nested?Array.from(r.value.values()).map(({validate:te})=>te(y).then(()=>{}).catch(oe=>{if(!(oe instanceof Qe))throw oe;return oe})):[];if(q){const te=d.value.filter(le=>!q.some(ne=>{var H,v,u;const L=(v=(H=C.value)==null?void 0:H[ne])==null?void 0:v.pattern;return ne===le.name||L&&((u=le.name)==null?void 0:u.match(L))})),oe=(await z()).filter(le=>q.some(ne=>{var H,v,u;const L=(v=(H=C.value)==null?void 0:H[ne])==null?void 0:v.pattern;return ne===le.name||L&&((u=le.name)==null?void 0:u.match(L))}));d.value=te.concat(oe)}else d.value=await z();const ee=(await Promise.all(B)).filter(te=>te!==void 0);if(d.value.length+ee.length>0){if(y.silent)return!1;throw new Qe(p,d.value,ee)}return y.transform&&Object.assign(a.state,V.value),a.state}const I=j(!1);Ye(Ja,Me(I));async function _(y){var B;I.value=a.loadingAuto&&!0;const q=y;try{q.data=await W({nested:!0,transform:a.transform}),await((B=a.onSubmit)==null?void 0:B.call(a,q)),b.clear()}catch(ee){if(!(ee instanceof Qe))throw ee;const te={...q,errors:ee.errors,children:ee.children};n("error",te)}finally{I.value=!1}}const ie=G(()=>a.disabled||I.value);return Ye(Qa,G(()=>({disabled:ie.value,validateOnInputDelay:a.validateOnInputDelay}))),s({validate:W,errors:d,setErrors(y,q){q?d.value=d.value.filter(B=>B.name!==q).concat(g(y)):d.value=g(y)},async submit(){await _(new Event("submit"))},getErrors(y){return y?d.value.filter(q=>q.name===y):d.value},clear(y){y?d.value=d.value.filter(q=>q.name!==y):d.value=[]},disabled:ie,loading:I,dirty:G(()=>!!b.size),dirtyFields:Me(b),blurredFields:Me(w),touchedFields:Me(S)}),(y,q)=>(o(),x(it(e(E)?"div":"form"),{id:e(p),class:K(c.value({class:a.class})),onSubmit:Ke(_,["prevent"])},{default:h(()=>[k(y.$slots,"default",{errors:d.value,loading:I.value})]),_:3},40,["id","class"]))}},qn={__name:"Modal",props:{title:{type:String,required:!1},description:{type:String,required:!1},content:{type:Object,required:!1},overlay:{type:Boolean,required:!1,default:!0},transition:{type:Boolean,required:!1,default:!0},fullscreen:{type:Boolean,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},dismissible:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["after:leave","after:enter","close:prevent","update:open"],setup(l,{emit:s}){const t=l,a=s,n=rt(),{t:i}=vt(),c=et(),p=Xe(yt(t,"open","defaultOpen","modal"),a),f=ht(we(()=>t.portal)),E=we(()=>t.content),r=G(()=>{const C={closeAutoFocus:b=>b.preventDefault()};return t.dismissible?C:["pointerDownOutside","interactOutside","escapeKeyDown"].reduce((S,w)=>(S[w]=g=>{g.preventDefault(),a("close:prevent")},S),C)}),d=G(()=>{var C;return ze({extend:ze(Xl),...((C=c.ui)==null?void 0:C.modal)||{}})({transition:t.transition,fullscreen:t.fullscreen})});return(C,b)=>(o(),x(e(pl),ke(Ae(e(p))),{default:h(({open:S,close:w})=>[n.default?(o(),x(e(bl),{key:0,"as-child":"",class:K(t.class)},{default:h(()=>[k(C.$slots,"default",{open:S})]),_:2},1032,["class"])):U("",!0),F(e(Jl),ke(Ae(e(f))),{default:h(()=>{var g,V;return[l.overlay?(o(),x(e(yl),{key:0,class:K(d.value.overlay({class:(g=t.ui)==null?void 0:g.overlay}))},null,8,["class"])):U("",!0),F(e(vl),R({class:d.value.content({class:[!n.default&&t.class,(V=t.ui)==null?void 0:V.content]})},E.value,{onAfterEnter:b[0]||(b[0]=z=>a("after:enter")),onAfterLeave:b[1]||(b[1]=z=>a("after:leave"))},Xa(r.value)),{default:h(()=>[n.content&&(l.title||n.title||l.description||n.description)?(o(),x(e(el),{key:0},{default:h(()=>[l.title||n.title?(o(),x(e(Wt),{key:0},{default:h(()=>[k(C.$slots,"title",{},()=>[me(se(l.title),1)])]),_:3})):U("",!0),l.description||n.description?(o(),x(e(Gt),{key:1},{default:h(()=>[k(C.$slots,"description",{},()=>[me(se(l.description),1)])]),_:3})):U("",!0)]),_:3})):U("",!0),k(C.$slots,"content",{close:w},()=>{var z,W,I;return[n.header||l.title||n.title||l.description||n.description||t.close||n.close?(o(),P("div",{key:0,class:K(d.value.header({class:(z=t.ui)==null?void 0:z.header}))},[k(C.$slots,"header",{close:w},()=>{var _,ie,y;return[ue("div",{class:K(d.value.wrapper({class:(_=t.ui)==null?void 0:_.wrapper}))},[l.title||n.title?(o(),x(e(Wt),{key:0,class:K(d.value.title({class:(ie=t.ui)==null?void 0:ie.title}))},{default:h(()=>[k(C.$slots,"title",{},()=>[me(se(l.title),1)])]),_:3},8,["class"])):U("",!0),l.description||n.description?(o(),x(e(Gt),{key:1,class:K(d.value.description({class:(y=t.ui)==null?void 0:y.description}))},{default:h(()=>[k(C.$slots,"description",{},()=>[me(se(l.description),1)])]),_:3},8,["class"])):U("",!0)],2),k(C.$slots,"actions"),t.close||n.close?(o(),x(e(fl),{key:0,"as-child":""},{default:h(()=>[k(C.$slots,"close",{close:w,ui:d.value},()=>{var q;return[t.close?(o(),x(It,R({key:0,icon:l.closeIcon||e(c).ui.icons.close,color:"neutral",variant:"ghost","aria-label":e(i)("modal.close")},typeof t.close=="object"?t.close:{},{class:d.value.close({class:(q=t.ui)==null?void 0:q.close})}),null,16,["icon","aria-label","class"])):U("",!0)]})]),_:2},1024)):U("",!0)]})],2)):U("",!0),n.body?(o(),P("div",{key:1,class:K(d.value.body({class:(W=t.ui)==null?void 0:W.body}))},[k(C.$slots,"body",{close:w})],2)):U("",!0),n.footer?(o(),P("div",{key:2,class:K(d.value.footer({class:(I=t.ui)==null?void 0:I.footer}))},[k(C.$slots,"footer",{close:w})],2)):U("",!0)]})]),_:2},1040,["class"])]}),_:2},1040)]),_:3},16))}},zn={class:"text-lg font-semibold"},Dn={class:"grid grid-cols-2 gap-4"},Kn={class:"mb-1 font-medium text-sm text-gray-700"},Vn={key:0,class:"text-xs text-gray-400 ml-2"},Mn={class:"flex justify-end gap-2 mt-6"},Pn=Z({__name:"EntityFormModal",props:{open:{type:Boolean},selectedSystem:{},selectedTableName:{},columnNames:{},formState:{},columnValuesMap:{}},emits:["update:open","update:formState","entitySaved"],setup(l,{emit:s}){const t=l,a=s,{t:n}=xt(),i=St(),c=bt(),p=ct();tl();const f=G({get:()=>t.open,set:b=>a("update:open",b)}),E=G(()=>{if(jt.isInErrorComponents("table-form-astnci-alergeny.vue")){const b=jt.getVariableValue("table-form-astnci-alergeny.vue","isMultiple");return typeof b=="boolean"?b:!0}return!0}),r=G({get:()=>t.formState,set:b=>a("update:formState",b)});ia(p.highlightHandler,p);function d(b){return b==="array"}async function C(){var S,w;console.log("Form submitted with data:",r.value),t.columnNames.forEach(g=>{d(c.propertiesNameTypeMap[g])&&Array.isArray(r.value[g])&&(r.value[g]=JSON.stringify(r.value[g]))});const b=r.value.id;try{if(b){const g=t.columnNames.filter(z=>z!=="id").map(z=>`${z} = ${typeof r.value[z]=="string"?`'${r.value[z].replace(/'/g,"''")}'`:r.value[z]}`).join(", "),V=`UPDATE ${t.selectedTableName} SET ${g} WHERE id = '${b}'`;(w=t.selectedSystem)==null||w.db.exec(V),i.add({title:n("edit_entity_toast_success"),color:"success"})}else{const g=t.columnNames.filter(W=>W!=="id"),V=g.map(W=>typeof r.value[W]=="string"?`'${r.value[W].replace(/'/g,"''")}'`:r.value[W]),z=`INSERT INTO ${t.selectedTableName} (${g.join(", ")}) VALUES (${V.join(", ")})`;(S=t.selectedSystem)==null||S.db.exec(z),i.add({title:n("add_toast_success"),color:"success"})}f.value=!1,a("entitySaved")}catch(g){console.error("Error saving entity:",g),i.add({title:n("save_entity_error")||"Error saving entity",color:"error",icon:"i-lucide-alert-triangle"})}}return(b,S)=>{const w=Cn,g=Ct,V=al,z=It,W=Fn,I=qn;return o(),x(I,{open:f.value,"onUpdate:open":S[1]||(S[1]=_=>f.value=_),title:r.value.id?e(n)("edit_entity"):e(n)("add_entity")},{content:h(()=>[F(V,null,{header:h(()=>[ue("h3",zn,se(r.value.id?e(n)("edit_entity"):e(n)("add_entity")),1)]),default:h(()=>[F(W,{state:r.value,onSubmit:C},{default:h(()=>[ue("div",Dn,[(o(!0),P(fe,null,be(b.columnNames.filter(_=>_!=="id"),(_,ie)=>(o(),P("div",{key:ie,class:"flex flex-col"},[F(V,{id:`table-form-${b.selectedTableName}-${_}`,class:"highlightable",onClick:y=>e(p).isHighlightMode&&e(p).highlightHandler.selectElement(`table-form-${b.selectedTableName}-${_}`,y)},{default:h(()=>[ue("label",Kn,[me(se(_)+" ",1),e(c).propertiesNameTypeMap[_]?(o(),P("span",Vn," ("+se(e(c).propertiesNameTypeMap[_])+") ",1)):U("",!0)]),d(e(c).propertiesNameTypeMap[_])?(o(),x(w,{key:0,modelValue:r.value[_],"onUpdate:modelValue":y=>r.value[_]=y,items:b.columnValuesMap[_],class:"w-48",disabled:e(p).isHighlightMode,multiple:E.value},null,8,["modelValue","onUpdate:modelValue","items","disabled","multiple"])):(o(),x(g,{key:1,modelValue:r.value[_],"onUpdate:modelValue":y=>r.value[_]=y,placeholder:`Enter ${_}`,disabled:e(p).isHighlightMode},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]))]),_:2},1032,["id","onClick"])]))),128))]),ue("div",Mn,[F(z,{type:"submit",color:"primary",disabled:e(p).isHighlightMode},{default:h(()=>[me(se(e(n)("save")),1)]),_:1},8,["disabled"]),F(z,{variant:"outline",onClick:S[0]||(S[0]=_=>f.value=!1),disabled:e(p).isHighlightMode},{default:h(()=>[me(se(e(n)("cancel")),1)]),_:1},8,["disabled"])])]),_:1},8,["state"])]),_:1})]),_:1},8,["open","title"])}}}),Wn=Z({__name:"database",setup(l){const s=ll(),t=nl(),a=ul(),n=bt(),i=ol(),{t:c}=xt(),p=St(),f=i.params.id,E=s.systems,r=j(null),d=j([]),C=j([]),b=j([]),S=j([]),w=j(""),g=j(!1),V=j({});let z=qe({});const W=j([{label:c("dashboard"),icon:"i-heroicons-chart-bar-20-solid",to:`/system/${t.selectedId}/dashboard`,data_target:"system-dashboard"},{label:c("sessions"),icon:"i-heroicons-calendar-date-range",to:`/system/${t.selectedId}/session`,data_target:"system-sessions"},{label:c("database"),icon:"i-heroicons-table-cells",to:`/system/${t.selectedId}/database`,data_target:"system-table"}]),I=G(()=>{var u,m;if(!((u=r.value)!=null&&u.db)||typeof r.value.db.query!="function")return[];try{const T=r.value.db.query("SELECT name FROM sqlite_master WHERE type='table'");return((m=T==null?void 0:T.results)==null?void 0:m.map(N=>N.name))||[]}catch(T){return console.error("Error fetching table names:",T),[]}}),_=G(()=>{var u,m,T;if(!w.value||!((u=r.value)!=null&&u.db))return"";try{const N=r.value.db.query(`SELECT COUNT(*) as count FROM ${w.value}`),J=((T=(m=N==null?void 0:N.results)==null?void 0:m[0])==null?void 0:T.count)||0,O=b.value.map(re=>`"${re}"`).join(", ");if(O){const re=r.value.db.query(`SELECT ${O} FROM ${w.value} ORDER BY id LIMIT 5`),ae=JSON.stringify((re==null?void 0:re.results)||[]);return`${J}-${ae.length}-${Date.now()}`}return`${J}-${Date.now()}`}catch{return`error-${Date.now()}`}});Ee(I,u=>{u.length>0&&!w.value&&(w.value=a.selectedTableName||u[0])},{immediate:!0}),Ee(w,async u=>{var m;if(!u||!((m=r.value)!=null&&m.db)){d.value=[];return}try{const T=r.value.db.query(`PRAGMA table_info(${u})`);C.value=(T==null?void 0:T.results)||[],b.value=[],S.value=[],C.value.forEach(O=>{b.value.push(O.name),S.value.push(O.type)});const N=b.value.map(O=>`"${O}"`).join(", "),J=r.value.db.query(`SELECT ${N} FROM ${u}`);z=qe(b.value.reduce((O,re)=>(O[re]="",O),{})),d.value=(J==null?void 0:J.results)||[]}catch(T){console.error(`Error fetching data from table ${u}:`,T),d.value=[]}},{immediate:!0}),Ee([w,b],([u,m])=>{const T=m.filter(N=>y(n.propertiesNameTypeMap[N]));u&&T.length&&q(u,T)}),Ee(_,()=>{B()},{flush:"post"});function ie(){r.value=E.find(u=>u.id===parseInt(f,10))||null}function y(u){return u==="array"}async function q(u,m){var T;(T=r.value)!=null&&T.db&&m.forEach(N=>{let J=u,O=N;N==="alergeny"&&(J="alergeny",O="nzev");try{const re=r.value.db.query(`SELECT DISTINCT "${O}" FROM "${J}"`);let ae=[];re.results.forEach(ve=>{const $=ve[O];if(Array.isArray($))ae.push(...$);else if(typeof $=="string")try{const M=JSON.parse($);Array.isArray(M)?ae.push(...M):$&&ae.push($)}catch{$&&ae.push($)}else $&&ae.push($)}),V.value[N]=Array.from(new Set(ae.filter(ve=>ve)))}catch{V.value[N]=[]}})}function B(){var u;if(!(!w.value||!((u=r.value)!=null&&u.db)))try{const m=b.value.map(N=>`"${N}"`).join(", "),T=r.value.db.query(`SELECT ${m} FROM ${w.value}`);d.value=(T==null?void 0:T.results)||[]}catch(m){console.error(`Error reloading data from table ${w.value}:`,m)}}function ee(u){w.value=u}function te(){z=qe(b.value.filter(u=>u!=="id").reduce((u,m)=>(u[m]="",u),{})),g.value=!0}function oe(u){var O,re;if(!((O=r.value)!=null&&O.db)||!w.value||u.id===void 0)return;const m=r.value.db.query(`PRAGMA table_info(${w.value})`);C.value=(m==null?void 0:m.results)||[];const T=b.value.map(ae=>`"${ae}"`).join(", "),N=r.value.db.query(`SELECT ${T} FROM ${w.value} WHERE id = '${u.id}'`),J=(re=N==null?void 0:N.results)==null?void 0:re[0];if(!J){p.add({title:c("edit_entity_toast_error")||"Entity not found",color:"error",icon:"i-lucide-alert-triangle"});return}z=qe(Object.keys(J).reduce((ae,ve)=>(ae[ve]=J[ve],ae),{})),g.value=!0}function le(u){var m;if(console.log("Delete row:",u),!(!w.value||!((m=r.value)!=null&&m.db)))try{r.value.db.exec(`DELETE FROM ${w.value} WHERE id = '${u.id}'`),B(),p.add({title:c("delete_toast_success"),color:"success",icon:"i-lucide-circle-check"})}catch(T){console.error(`Error deleting row from table ${w.value}:`,T),p.add({title:c("delete_toast_error"),color:"error",icon:"i-lucide-alert-triangle"})}}function ne(){B()}function L(u,m){console.log("Sort changed:",u,m)}function H(u){console.log("Filter changed:",u)}function v(u){console.log("Open editor for column:",u)}return he(()=>{ie()}),(u,m)=>{const T=Sn,N=Pn;return o(),P("div",null,[F(dl,{items:W.value},null,8,["items"]),F(T,{system:r.value,"table-names":I.value,"selected-table-name":w.value,"selected-table-data":d.value,"column-names":b.value,"column-types":S.value,"table-info":C.value,"column-values-map":V.value,onTableSelect:ee,onAdd:te,onEdit:oe,onDelete:le,onOpenEditor:v,onSortChange:L,onFilterChange:H},null,8,["system","table-names","selected-table-name","selected-table-data","column-names","column-types","table-info","column-values-map"]),F(N,{open:g.value,selectedSystem:r.value,selectedTableName:w.value,columnNames:b.value,formState:e(z),columnValuesMap:V.value,"onUpdate:open":m[0]||(m[0]=J=>g.value=J),"onUpdate:formState":m[1]||(m[1]=J=>gt(z)?z.value=J:z=J),onEntitySaved:ne},null,8,["open","selectedSystem","selectedTableName","columnNames","formState","columnValuesMap"])])}}});export{Wn as default};
